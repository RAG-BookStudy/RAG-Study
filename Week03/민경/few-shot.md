# Few-shot

## 언제 Few-shot이 필요할까?

Few-shot은 **모델이 작업의 패턴을 이해하기 어려울 때** 사용한다.

**Few-shot이 필요한 상황:**

1. **특정 포맷 출력이 필요할 때**
    - JSON, XML 등 정확한 구조가 필요한 경우
    - 회사만의 독특한 문서 양식을 따라야 할 때
2. **도메인 특화 작업**
    - 의료, 법률처럼 전문 용어와 맥락이 중요한 분야
    - 일반적이지 않은 분류 기준을 따를 때
3. **일관성이 중요할 때**
    - 같은 스타일의 응답이 계속 필요한 경우
    - 브랜드 톤앤매너를 유지해야 할 때
4. **복잡한 추론이 필요할 때**
    - 여러 단계를 거쳐 답을 도출해야 하는 문제
    - 예시로 사고 과정을 보여주면 효과적
    

**Few-shot이 불필요한 상황:**

- 일반적인 질문 답변
- 단순 번역, 요약 같은 보편적 작업
- 모델이 이미 잘 아는 작업 (코드 생성 등)

## 예시를 몇 개나 주는 게 적절할까?
- **1-3개**: 대부분의 경우
- **3-5개**: 복잡한 패턴이나 다양한 케이스 처리 필요시
- **5-10개**: 매우 복잡하거나 미묘한 차이가 중요할 때
- **10개 이상**: 거의 불필요 (비용만 증가)

## Few-shot의 비용 vs 효과

**비용:**

```
입력 토큰 = 시스템 프롬프트 + Few-shot 예시 + 실제 질문

예시 3개 추가 = 약 300-500 토큰 증가
→ GPT-4 기준: $0.003-0.005 추가 (건당)
→ 하루 1000건 처리시: $3-5 추가 비용

```

**효과:**

- **정확도 향상**: Zero-shot 대비 20-40% 개선 가능
- **재시도 감소**: 한 번에 원하는 결과를 얻어 전체 비용 절감
- **후처리 감소**: 파싱 에러, 포맷 오류가 줄어듦

---

| 상황 | 권장 | 이유 |
| --- | --- | --- |
| 프로토타입 단계 | Zero-shot | 빠른 검증 |
| 정확도가 중요 | Few-shot | 신뢰성 우선 |
| 대량 처리 (10만건+) | 예시 최소화 | 비용 누적 |
| 복잡한 도메인 | Few-shot | 실패 비용이 더 큼 |


1. **예시 재사용**: 같은 예시를 여러 요청에 사용하면 캐싱 효과
2. **동적 예시 선택**: 입력과 유사한 예시만 선택 (Semantic Few-shot)